<!DOCTYPE html>
<html lang="en">

<head>
  <title>Secure Message Service</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/main.css" media="screen" rel="stylesheet" />
  <link href="@Url.Content("/css/sms.css")" media="screen" rel="stylesheet" no-cdn />
  @Html.Raw(JavaScriptSnippet.FullScript)
</head>

<body class="govuk-template__body {{ bodyClass }}">

  @{
  <!-- var userLogin = Context.User.Claims.FirstOrDefault(c => c.Type == "urn:github:login" && c.Issuer == "GitHub").Value;
        var userProfileUrl = Context.User.Claims.FirstOrDefault(c => c.Type == "urn:github:url" && c.Issuer == "GitHub").Value; -->
  }

  <script>
    document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');
  </script>

  <a href="#main-content" class="govuk-skip-link">Skip to main content</a>

  <header class="govuk-header das-header" role="banner" data-module="header">
    <div class="govuk-header__container govuk-width-container">
      <div class="govuk-header__content" style="width:100%"></div>
      <a href="/" class="govuk-header__link govuk-header__link--service-name">
        Secure Message Service
      </a>
      <span id="navigation" class="govuk-header__navigation das-float-right github-nav-header" aria-hidden="true">
        @if(Context.User.Identity.IsAuthenticated)
        {
        var issuer = "GitHub";
        var userLogin = Context.User.Claims.FirstOrDefault(c => c.Type == "urn:github:login" && c.Issuer ==
        issuer).Value;
        var userProfileUrl = Context.User.Claims.FirstOrDefault(c => c.Type == "urn:github:url" && c.Issuer ==
        issuer).Value;
        var userAvatarUrl = Context.User.Claims.FirstOrDefault(c => c.Type == "urn:github:avatar" && c.Issuer ==
        issuer).Value;

        <nav>
          <ul id="navigation" class="govuk-header__navigation github-nav-header">
            <li class="govuk-header__navigation-item github-nav-header">
              <a class="govuk-header__link" href="@userProfileUrl">
                <img class="github-nav-header-img" src="@userAvatarUrl&s=30" />
              </a>
            </li>
            <li class="govuk-header__navigation-item github-nav-header">
              <a class="govuk-header__link" href="@Url.Action("SignOut","Account")">
                Sign out
              </a>
            </li>
          </ul>
        </nav>

        }
      </span>
    </div>
    </div>
  </header>
  <div class="govuk-width-container">
    <div class="govuk-phase-banner">
      <p class="govuk-phase-banner__content"><strong class="govuk-tag govuk-phase-banner__content__tag ">
          preview
        </strong>
        <span class="govuk-phase-banner__text">
          This tool is for development purposes only.
        </span>
      </p>
    </div>

    <main class="govuk-main-wrapper " id="main-content" role="main">

      @RenderBody()

    </main>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script type="text/javascript" no-cdn src="@Url.Content("/js/validation.js")"></script>
  <script type="text/javascript" no-cdn src="@Url.Content("/js/clipboard.min.js")"></script>
  <script type="text/javascript" no-cdn src="@Url.Content("/js/clipboard_button.js")"></script>
</body>
</html>
